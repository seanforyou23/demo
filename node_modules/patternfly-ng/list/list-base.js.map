{"version":3,"sources":["../../build/src/app/list/list-base.ts"],"names":[],"mappings":"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","file":"list-base.js","sourceRoot":"","sourcesContent":["import {\n  EventEmitter,\n  Input,\n  Output,\n  TemplateRef,\n} from '@angular/core';\n\nimport { Action } from '../action/action';\nimport { ListConfigBase } from './list-config-base';\nimport { ListEvent } from './list-event';\n\n/**\n * List base\n */\nexport abstract class ListBase {\n  /**\n   * The name of the template containing actions for each item\n   */\n   actionTemplate: TemplateRef<any>;\n\n  /**\n   * An array of items to display in the list\n   */\n   items: any[];\n\n  /**\n   * The name of the template containing item layout\n   */\n   itemTemplate: TemplateRef<any>;\n\n  /**\n   * The event emitted when an action (e.g., button, kebab, etc.) has been selected\n   */\n   onActionSelect = new EventEmitter();\n\n  /**\n   * The event emitted when an item has been clicked\n   */\n   onClick = new EventEmitter();\n\n  /**\n   * The event emitted when an item is double clicked\n   */\n   onDblClick = new EventEmitter();\n\n  /**\n   * The event emitted when an item selection has been changed\n   */\n   onSelectionChange = new EventEmitter();\n\n  /**\n   * The default constructor\n   */\n  constructor() {\n  }\n\n  // Initialization\n\n  /**\n   * Set up default config\n   */\n  protected setupConfig(): void {\n    let config = this.getConfig();\n    if (config.multiSelect === undefined || config.multiSelect === false) {\n      let selectedItems = this.getSelectedItems(this.items);\n      if (selectedItems.length > 0) {\n        this.selectSingleItem(selectedItems[0]);\n      }\n    }\n    if (config.multiSelect && config.dblClick) {\n      throw new Error('ListComponent - Illegal use: ' +\n        'Cannot use both multi-select and double click selection at the same time.');\n    }\n    if (config.selectItems && config.showCheckbox) {\n      throw new Error('ListComponent - Illegal use: ' +\n        'Cannot use both checkbox and click selection at the same time.');\n    }\n    if (config.selectItems && config.showRadioButton) {\n      throw new Error('ListComponent - Illegal use: ' +\n        'Cannot use both radio button and single row selection at the same time.');\n    }\n    if (config.showRadioButton && config.showCheckbox) {\n      throw new Error('ListComponent - Illegal use: ' +\n        'Cannot use both radio button and checkbox at the same time.');\n    }\n  }\n\n  /**\n   * Return component config\n   *\n   * @returns {ListConfigBase} The component config\n   */\n  protected abstract getConfig(): ListConfigBase;\n\n  // Accessors\n\n  /**\n   * Get the flag indicating list has no items\n   *\n   * @returns {boolean} The flag indicating list has no items\n   */\n  get itemsEmpty(): boolean {\n    return !(this.items !== undefined && this.items.length > 0);\n  }\n\n  // Actions\n\n  /**\n   * Helper to generate action select event\n   *\n   * @param {Action} action The selected action\n   */\n  protected handleAction(action: Action): void {\n    if (action && action.disabled !== true) {\n      this.onActionSelect.emit(action);\n    }\n  }\n\n  // Selection\n\n  /**\n   * Helper to generate selection change event\n   *\n   * @param item The selected item\n   */\n  protected checkboxChange(item: any): void {\n    this.onSelectionChange.emit({\n      item: item,\n      selectedItems: this.getSelectedItems(this.items)\n    } as ListEvent);\n  }\n\n  /**\n   * Helper to generate double click event\n   *\n   * @param {MouseEvent} $event The triggered event\n   * @param item The double clicked item\n   */\n  protected dblClick($event: MouseEvent, item: any): void {\n    let config = this.getConfig();\n    if (config.dblClick === true) {\n      this.onDblClick.emit({\n        item: item\n      } as ListEvent);\n    }\n  }\n\n  /**\n   * Helper to deselect given items items and children\n   *\n   * @param {any[]} items The items to be deselected\n   */\n  protected deselectItems(items: any[]): void {\n    if (items !== undefined) {\n      for (let i = 0; i < items.length; i++) {\n        items[i].selected = false;\n        if (Array.isArray(items[i].children)) {\n          this.deselectItems(items[i].children);\n        }\n      }\n    }\n  }\n\n  /**\n   * Helper to retrieve selected items\n   *\n   * @param {any[]} items The items containing possible selections\n   * @returns {any[]} A list of selected items\n   */\n  protected getSelectedItems(items: any[]): any[] {\n    let selectedItems = [];\n    if (items !== undefined) {\n      for (let i = 0; i < items.length; i++) {\n        if (items[i].selected) {\n          selectedItems.push(items[i]);\n        }\n        if (Array.isArray(items[i].children)) {\n          let selectedChildren = this.getSelectedItems(items[i].children);\n          selectedItems = selectedItems.concat(selectedChildren);\n        }\n      }\n    }\n    return selectedItems;\n  }\n\n  /**\n   * Helper to generate selection change event\n   *\n   * @param item The selected item\n   */\n  protected radioButtonChange(item: any): void {\n    let selected = item.selected;\n\n    this.deselectItems(this.items);\n    if (!selected) {\n      this.selectSingleItem(item);\n    }\n\n    this.onSelectionChange.emit({\n      item: item,\n      selectedItems: this.getSelectedItems(this.items)\n    } as ListEvent);\n  }\n\n  /**\n   * Helper to select a single item and deselect all others\n   *\n   * @param item The item to select\n   */\n  protected selectSingleItem(item: any): void {\n    this.deselectItems(this.items);\n    item.selected = true;\n  }\n\n  /**\n   * Select or deselect an item\n   *\n   * @param item The item to select or deselect\n   * @param {boolean} selected True if item should be selected\n   */\n  selectItem(item: any, selected: boolean): void {\n    let config = this.getConfig();\n\n    // Are we using checkboxes or radiobuttons?\n    if (config.showCheckbox) {\n      item.selected = selected;\n      return;\n    }\n    if (config.showRadioButton) {\n      this.deselectItems(this.items);\n      this.selectSingleItem(item);\n      return;\n    }\n\n    // Multiple item selection\n    if (config.multiSelect && !config.dblClick) {\n      item.selected = selected;\n    } else {\n      // Single item selection\n      this.deselectItems(this.items);\n      this.selectSingleItem(item);\n    }\n  }\n\n  /**\n   * Helper to toggle item selection\n   *\n   * @param {MouseEvent} $event The triggered event\n   * @param item The item to select\n   */\n  protected toggleSelection($event: MouseEvent, item: any): void {\n    let config = this.getConfig();\n    let selectionChanged = false;\n\n    // Always emit click event\n    this.onClick.emit({\n      item: item\n    } as ListEvent);\n\n    // Go no further if click selection isn't enabled\n    if (!config.selectItems) {\n      return;\n    }\n\n    // Multiple item selection\n    if (config.multiSelect && !config.dblClick) {\n      // Item's 'selected' prop may be undefined initially\n      if (item.selected === true) {\n        item.selected = false;\n      } else {\n        item.selected = true;\n      }\n      selectionChanged = true;\n    } else {\n      // Single item selection\n      if (item.selected === true) {\n        // Avoid accidentally deselecting by dblClick\n        if (!config.dblClick) {\n          this.deselectItems(this.items);\n          selectionChanged = true;\n        }\n      } else {\n        this.selectSingleItem(item);\n        selectionChanged = true;\n      }\n    }\n\n    // Emit event only if selection changed\n    if (selectionChanged === true) {\n      this.onSelectionChange.emit({\n        item: item,\n        selectedItems: this.getSelectedItems(this.items)\n      } as ListEvent);\n    }\n  }\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'actionTemplate': [{ type: Input },],\n'items': [{ type: Input },],\n'itemTemplate': [{ type: Input },],\n'onActionSelect': [{ type: Output, args: ['onActionSelect', ] },],\n'onClick': [{ type: Output, args: ['onClick', ] },],\n'onDblClick': [{ type: Output, args: ['onDblClick', ] },],\n'onSelectionChange': [{ type: Output, args: ['onSelectionChange', ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}